<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Security Model • dsVertClient</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Security Model">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dsVertClient</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a-getting-started.html">Getting Started with dsVertClient</a></li>
    <li><a class="dropdown-item" href="../articles/b-statistical-analysis.html">Statistical Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/c-methodology.html">Methodology</a></li>
    <li><a class="dropdown-item" href="../articles/d-validation.html">Validation</a></li>
    <li><a class="dropdown-item" href="../articles/e-security.html">Security Model</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/isglobal-brge/dsVertClient" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Security Model</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/isglobal-brge/dsVertClient/blob/HEAD/vignettes/e-security.Rmd" class="external-link"><code>vignettes/e-security.Rmd</code></a></small>
      <div class="d-none name"><code>e-security.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>dsVertClient uses Multiparty Homomorphic Encryption (MHE) based on
the CKKS scheme to protect data during distributed computation. This
vignette describes the threat model, what each participant learns, and
the security guarantees.</p>
<hr>
</div>
<div class="section level2">
<h2 id="threat-model">Threat Model<a class="anchor" aria-label="anchor" href="#threat-model"></a>
</h2>
<p>The protocol assumes a <strong>semi-honest</strong>
(honest-but-curious) adversary model:</p>
<ul>
<li>All parties follow the protocol correctly</li>
<li>Parties may attempt to infer information from messages they
receive</li>
<li>No party intentionally sends corrupted data or deviates from the
protocol</li>
</ul>
<p>This is the standard model for federated analytics in healthcare and
research settings, where institutions are contractually obligated to
follow protocols but may be curious about others’ data.</p>
<hr>
</div>
<div class="section level2">
<h2 id="what-mhe-protects">What MHE Protects<a class="anchor" aria-label="anchor" href="#what-mhe-protects"></a>
</h2>
<div class="section level3">
<h3 id="correlation-analysis">Correlation Analysis<a class="anchor" aria-label="anchor" href="#correlation-analysis"></a>
</h3>
<p>During distributed correlation, cross-server products are computed on
encrypted data. Each server encrypts its standardized columns under a
collective public key (CPK). No single server can decrypt the
ciphertexts.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="37%">
<col width="41%">
</colgroup>
<thead><tr class="header">
<th>Step</th>
<th>Data Flow</th>
<th>Protection</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Encryption</td>
<td>Server k encrypts Z_k under CPK</td>
<td>Only collective decryption possible</td>
</tr>
<tr class="even">
<td>Cross-product</td>
<td>Server A computes z_A x Enc(z_B)</td>
<td>Server A sees Enc(z_B), not z_B</td>
</tr>
<tr class="odd">
<td>Partial decrypt</td>
<td>Each server provides share_k</td>
<td>Individual shares are meaningless</td>
</tr>
<tr class="even">
<td>Fuse</td>
<td>Client combines all K shares</td>
<td>Only aggregate correlation revealed</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="glm-with-encrypted-labels">GLM with Encrypted Labels<a class="anchor" aria-label="anchor" href="#glm-with-encrypted-labels"></a>
</h3>
<p>The response variable y never leaves the label server in plaintext.
Non-label servers compute gradient contributions using encrypted y.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="37%">
<col width="41%">
</colgroup>
<thead><tr class="header">
<th>Step</th>
<th>Data Flow</th>
<th>Protection</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Encrypt y</td>
<td>Label server encrypts y under CPK</td>
<td>ct_y is opaque to all others</td>
</tr>
<tr class="even">
<td>Gradient</td>
<td>Non-label server computes X_k^T (ct_y - mu)</td>
<td>Result is encrypted</td>
</tr>
<tr class="odd">
<td>Threshold decrypt</td>
<td>All K servers provide partial shares</td>
<td>Only p_k-length gradient revealed</td>
</tr>
<tr class="even">
<td>BCD update</td>
<td>Server k solves local system</td>
<td>Raw features X_k stay local</td>
</tr>
</tbody>
</table>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="what-the-client-sees">What the Client Sees<a class="anchor" aria-label="anchor" href="#what-the-client-sees"></a>
</h2>
<p>The client (researcher coordinating the analysis) receives:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Collective Public Key (CPK)</strong> – cannot decrypt
anything alone</li>
<li>
<strong>Encrypted ciphertexts</strong> – opaque blobs, undecryptable
without all K secret key shares</li>
<li>
<strong>Partial decryption shares</strong> – each share individually
reveals nothing</li>
<li>
<strong>Final aggregated results</strong> – correlation
coefficients, GLM coefficients, deviance</li>
</ol>
<p>The client CANNOT see:</p>
<ul>
<li>Individual-level data from any server</li>
<li>Raw feature values</li>
<li>Response variable values</li>
<li>Residuals or per-observation predictions</li>
</ul>
<hr>
</div>
<div class="section level2">
<h2 id="what-each-server-sees">What Each Server Sees<a class="anchor" aria-label="anchor" href="#what-each-server-sees"></a>
</h2>
<table class="table">
<colgroup>
<col width="39%">
<col width="18%">
<col width="42%">
</colgroup>
<thead><tr class="header">
<th>Server Role</th>
<th>Sees</th>
<th>Does NOT See</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Any server</td>
<td>Its own raw data</td>
<td>Other servers’ raw data</td>
</tr>
<tr class="even">
<td>Any server</td>
<td>Encrypted columns from others (opaque)</td>
<td>Plaintext of encrypted columns</td>
</tr>
<tr class="odd">
<td>Any server</td>
<td>mu and w vectors (derived from aggregate eta)</td>
<td>Which specific observations drive the aggregate</td>
</tr>
<tr class="even">
<td>Label server</td>
<td>Response variable y in plaintext</td>
<td>Other servers’ feature matrices</td>
</tr>
<tr class="odd">
<td>Non-label server</td>
<td>Encrypted y (ct_y)</td>
<td>Response variable in plaintext</td>
</tr>
</tbody>
</table>
<hr>
</div>
<div class="section level2">
<h2 id="threshold-property">Threshold Property<a class="anchor" aria-label="anchor" href="#threshold-property"></a>
</h2>
<p>Decryption requires cooperation from ALL K parties. The collective
secret key is additively shared:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>k</mi><mo>=</mo><mi>s</mi><msub><mi>k</mi><mn>1</mn></msub><mo>+</mo><mi>s</mi><msub><mi>k</mi><mn>2</mn></msub><mo>+</mo><mi>…</mi><mo>+</mo><mi>s</mi><msub><mi>k</mi><mi>K</mi></msub></mrow><annotation encoding="application/x-tex">sk = sk_1 + sk_2 + \ldots + sk_K</annotation></semantics></math></p>
<p>Each party k computes a partial decryption share using its sk_k. Only
when ALL K shares are combined can the ciphertext be decrypted. This is
a <strong>K-of-K threshold scheme</strong>: every party must
participate.</p>
<hr>
</div>
<div class="section level2">
<h2 id="collusion-resistance">Collusion Resistance<a class="anchor" aria-label="anchor" href="#collusion-resistance"></a>
</h2>
<p>Even if K-1 servers collude (share their secret key shares), they
cannot decrypt any ciphertext without the remaining server’s share. The
RLWE assumption guarantees that the partial information from K-1 shares
is computationally indistinguishable from random noise.</p>
<p>Example with 3 servers:</p>
<ul>
<li>Servers 1 and 2 collude: they hold sk_1 + sk_2, but need sk_3</li>
<li>Servers 1 and 3 collude: they hold sk_1 + sk_3, but need sk_2</li>
<li>Only if all 3 cooperate: sk_1 + sk_2 + sk_3 = sk, and decryption
succeeds</li>
</ul>
<hr>
</div>
<div class="section level2">
<h2 id="what-is-revealed">What IS Revealed<a class="anchor" aria-label="anchor" href="#what-is-revealed"></a>
</h2>
<p>The following aggregate statistics ARE revealed to the client:</p>
<table class="table">
<thead><tr class="header">
<th>Analysis</th>
<th>Revealed</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Correlation</td>
<td>Pairwise correlation coefficients r_ij</td>
</tr>
<tr class="even">
<td>PCA</td>
<td>Eigenvalues and loadings (derived from correlation)</td>
</tr>
<tr class="odd">
<td>GLM</td>
<td>Regression coefficients, deviance, fit statistics</td>
</tr>
</tbody>
</table>
<p>These are summary statistics over n observations. They do not
directly reveal individual data points. However, as with any statistical
release, care should be taken with very small samples or highly
identifying variable combinations.</p>
<hr>
</div>
<div class="section level2">
<h2 id="psi-alignment-security">PSI Alignment Security<a class="anchor" aria-label="anchor" href="#psi-alignment-security"></a>
</h2>
<p>Record alignment uses an ECDH-based Private Set Intersection (PSI)
protocol. Each server holds a secret P-256 scalar that never leaves the
server. The protocol has the following security properties:</p>
<div class="section level3">
<h3 id="dictionary-attack-resistance">Dictionary Attack Resistance<a class="anchor" aria-label="anchor" href="#dictionary-attack-resistance"></a>
</h3>
<p>Unlike SHA-256 hashing, where an attacker who obtains the hash list
can pre-compute hashes for a dictionary of plausible identifiers and
match them, ECDH-PSI masks each identifier with a server-held secret
scalar. Without knowledge of the scalar, the masked curve points are
computationally indistinguishable from random group elements. An
attacker who intercepts the masked points cannot mount a dictionary
attack because they cannot reproduce the server’s scalar
multiplication.</p>
</div>
<div class="section level3">
<h3 id="server-scalar-confidentiality">Server Scalar Confidentiality<a class="anchor" aria-label="anchor" href="#server-scalar-confidentiality"></a>
</h3>
<p>Each server
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>
draws a secret scalar
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>α</mi><mi>k</mi></msub><annotation encoding="application/x-tex">\alpha_k</annotation></semantics></math>
uniformly at random from the P-256 curve order. This scalar is generated
and stored exclusively on the server. It is never transmitted to the
client or to other servers. The masked points
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>α</mi><mi>k</mi></msub><mo>⋅</mo><mi>H</mi><mo stretchy="false" form="prefix">(</mo><mtext mathvariant="normal">id</mtext><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\alpha_k \cdot H(\text{id})</annotation></semantics></math>
are one-way under the elliptic-curve discrete logarithm assumption:
given a masked point, recovering
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>α</mi><mi>k</mi></msub><annotation encoding="application/x-tex">\alpha_k</annotation></semantics></math>
is computationally infeasible.</p>
</div>
<div class="section level3">
<h3 id="unlinkability-across-servers-ddh">Unlinkability Across Servers (DDH)<a class="anchor" aria-label="anchor" href="#unlinkability-across-servers-ddh"></a>
</h3>
<p>The client receives doubly-masked points from each server pair. Under
the Decisional Diffie–Hellman (DDH) assumption on P-256, the client
cannot link a singly-masked point from server
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>
to the corresponding singly-masked point from server
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>B</mi><annotation encoding="application/x-tex">B</annotation></semantics></math>.
The client can only determine whether two doubly-masked points (one from
each direction) correspond to the same identifier, which is exactly the
information needed for alignment and nothing more.</p>
</div>
<div class="section level3">
<h3 id="non-matching-identifier-privacy">Non-Matching Identifier Privacy<a class="anchor" aria-label="anchor" href="#non-matching-identifier-privacy"></a>
</h3>
<p>No party learns which identifiers are held by other servers but are
absent from its own dataset. The intersection protocol reveals only the
set of common identifiers (in masked form). Identifiers present on
server
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>
but absent from server
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>B</mi><annotation encoding="application/x-tex">B</annotation></semantics></math>
produce masked points that have no match in the doubly-masked output,
and the client simply discards them without learning anything about the
underlying identifier values.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="assumptions-and-limitations">Assumptions and Limitations<a class="anchor" aria-label="anchor" href="#assumptions-and-limitations"></a>
</h2>
<ol style="list-style-type: decimal">
<li><p><strong>Semi-honest model</strong>: Parties are assumed to follow
the protocol correctly. A malicious party could send corrupted key
shares or ciphertexts. Verifiable computation is not
implemented.</p></li>
<li><p><strong>RLWE hardness</strong>: Security relies on the Ring
Learning With Errors problem being computationally hard. RLWE is a
leading candidate for post-quantum cryptography.</p></li>
<li><p><strong>Network security</strong>: The protocol assumes secure
(TLS) communication channels between the client and servers.
DataSHIELD/Opal provides this via HTTPS.</p></li>
<li><p><strong>Aggregate leakage</strong>: The revealed aggregate
statistics (correlations, coefficients) could theoretically allow
inference about individuals if the sample is very small or variables are
quasi-identifiers. This is inherent to any statistical release, not
specific to MHE.</p></li>
<li><p><strong>No differential privacy</strong>: The protocol provides
cryptographic protection of intermediate computations but does not add
noise to final outputs. Combining MHE with differential privacy is
possible but not currently implemented.</p></li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

<div class="pkgdown-footer-right">

</div>

    </footer>
</div>





  </body>
</html>
