% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ds.validateIdFormat.R
\name{ds.validateIdFormat}
\alias{ds.validateIdFormat}
\title{Validate Identifier Format Across Servers}
\usage{
ds.validateIdFormat(data_name, id_col, pattern = NULL, datasources = NULL)
}
\arguments{
\item{data_name}{Character string. Name of the data frame on each server.}

\item{id_col}{Character string. Name of the identifier column.}

\item{pattern}{Character string (optional). Regular expression pattern
that IDs should match on all servers.}

\item{datasources}{DataSHIELD connection object(s). If NULL, uses all
available connections.}
}
\value{
A list with class "ds.id.validation" containing:
\itemize{
\item \code{valid}: Logical, TRUE if formats are consistent across servers
\item \code{servers}: Data frame with validation results per server
\item \code{format_match}: Logical, TRUE if all servers have same format signature
\item \code{pattern_match}: Logical, TRUE if all servers match the pattern
(only if pattern provided)
\item \code{warnings}: Character vector of any warnings detected
}
}
\description{
Client-side function that validates identifier format
consistency across all DataSHIELD servers before record alignment.
}
\details{
This function should be called before \code{ds.alignRecords} to ensure
that identifier formats are consistent across all data partitions. It
helps catch common issues like:
\itemize{
\item Different ID formats (e.g., "001" vs "1" vs "ID001")
\item Missing or duplicate identifiers
\item Type mismatches (numeric vs character)
}

The function uses format signatures (hashed format characteristics) to
compare formats without revealing actual identifier values.
}
\examples{
\dontrun{
# Validate ID format before alignment
validation <- ds.validateIdFormat("D", "patient_id", datasources = conns)
print(validation)

if (validation$valid) {
  # Proceed with alignment
  ref_hashes <- ds.hashId("D", "patient_id", datasource = conns["server1"])
  ds.alignRecords("D", "patient_id", ref_hashes$hashes, "D_aligned", conns)
}

# With pattern validation
validation <- ds.validateIdFormat("D", "patient_id",
                                  pattern = "^[A-Z]{2}[0-9]{6}$",
                                  datasources = conns)
}

}
\seealso{
\code{\link{ds.hashId}}, \code{\link{ds.alignRecords}}
}
