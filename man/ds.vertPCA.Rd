% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ds.vertPCA.R
\name{ds.vertPCA}
\alias{ds.vertPCA}
\title{Principal Component Analysis for Vertically Partitioned Data}
\usage{
ds.vertPCA(data_name, variables, n_components = NULL, datasources = NULL)
}
\arguments{
\item{data_name}{Character string. Name of the (aligned) data frame on
each server.}

\item{variables}{A named list where each name corresponds to a server name
and each element is a character vector of variable names from that server.}

\item{n_components}{Integer. Number of principal components to return.
Default is NULL (returns all).}

\item{datasources}{DataSHIELD connection object or list of connections.
If NULL, uses all available connections.}
}
\value{
A list with class "ds.pca" containing:
\itemize{
\item \code{scores}: Matrix of principal component scores (n_obs x n_components)
\item \code{loadings}: Matrix of variable loadings (n_vars x n_components)
\item \code{variance}: Variance explained by each component
\item \code{variance_pct}: Percentage of variance explained
\item \code{cumulative_pct}: Cumulative percentage explained
\item \code{var_names}: Variable names
}
}
\description{
Client-side function that performs PCA on vertically
partitioned data using distributed Block SVD.
}
\details{
This function extends the Block SVD approach for correlation to perform
full PCA:

\enumerate{
\item Each server computes U*D from SVD of its standardized variables
\item Client combines and performs final SVD
\item Principal components = U * D (combined)
\item Loadings = V (right singular vectors)
\item Variance = D^2 / (n-1)
}
}
\examples{
\dontrun{
vars <- list(
  server1 = c("age", "weight"),
  server2 = c("height", "bmi")
)

pca_result <- ds.vertPCA("D_aligned", vars, n_components = 3)

# Plot first two components
plot(pca_result$scores[, 1], pca_result$scores[, 2],
     xlab = paste0("PC1 (", round(pca_result$variance_pct[1], 1), "\%)"),
     ylab = paste0("PC2 (", round(pca_result$variance_pct[2], 1), "\%)"))
}

}
\seealso{
\code{\link{ds.vertCor}} for correlation analysis
}
